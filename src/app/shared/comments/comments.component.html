<div class="warp-comments">

  <input type="text" placeholder="Оставить комментарий" (keyup.enter)="createComment()" [(ngModel)]="commentsText">

  <div *ngIf="!commentsArray || commentsArray.length<1 ;else commentsTemplate">
    <p>Ваш комментарий будет первым!</p>
  </div>

  <ng-template #commentsTemplate>
    <div *ngFor="let comment of this.commentsArray" class="users-comments">
      <div class="comment-container">
        <div class="display-column">
          <div class="comment-header">
            <p class="comment-name">{{comment.user.name}}</p>
            <p class="comment-create">{{comment.created | date: 'd.M, h:mm'}}</p>
          </div>


          <input type="text" *ngIf="toggleEditComment && comment.id == commentEditId;else commentText"
                 placeholder="Ваш комментарий"
                 [(ngModel)]="commentsText"
                 (keyup.enter)="editComment(comment.id,commentsText)"
                 (input)="getTextFromInput($event)"
          >

          <ng-template #commentText>
            <p class="comment-text">{{comment.text}}</p>
          </ng-template>

        </div>
        <div>
          <button *ngIf="this.userId == comment.user.id" (click)="this.deleteComment(comment.id)" class="delete-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15"
                 viewBox="0 0 20 21" fill="current color">
              <path
                d="M10 1.75C9.02154 1.75 8.1871 2.37503 7.87787 3.24993C7.73983 3.64047 7.31134 3.84517 6.9208 3.70713C6.53026 3.56909 6.32557 3.1406 6.46361 2.75007C6.97804 1.29459 8.36609 0.25 10 0.25C11.634 0.25 13.022 1.29459 13.5365 2.75007C13.6745 3.1406 13.4698 3.56909 13.0793 3.70713C12.6887 3.84517 12.2602 3.64047 12.1222 3.24993C11.813 2.37503 10.9785 1.75 10 1.75Z"/>
              <path
                d="M0.75 5C0.75 4.58579 1.08579 4.25 1.5 4.25H18.5001C18.9143 4.25 19.2501 4.58579 19.2501 5C19.2501 5.41421 18.9143 5.75 18.5001 5.75H1.5C1.08579 5.75 0.75 5.41421 0.75 5Z"/>
              <path
                d="M3.91508 7.45011C3.88753 7.03681 3.53015 6.72411 3.11686 6.75166C2.70356 6.77921 2.39085 7.13659 2.41841 7.54989L2.88186 14.5016C2.96735 15.7844 3.03641 16.8205 3.19838 17.6336C3.36678 18.4789 3.6532 19.185 4.2448 19.7384C4.83639 20.2919 5.55994 20.5307 6.41459 20.6425C7.23663 20.75 8.27507 20.75 9.56066 20.75H10.4395C11.7251 20.75 12.7635 20.75 13.5856 20.6425C14.4402 20.5307 15.1638 20.2919 15.7554 19.7384C16.347 19.185 16.6334 18.4789 16.8018 17.6336C16.9637 16.8205 17.0328 15.7844 17.1183 14.5016L17.5818 7.54989C17.6093 7.13659 17.2966 6.77921 16.8833 6.75166C16.47 6.72411 16.1126 7.03681 16.0851 7.45011L15.6251 14.3492C15.5353 15.6971 15.4712 16.6349 15.3307 17.3405C15.1943 18.025 15.004 18.3873 14.7306 18.6431C14.4572 18.8988 14.083 19.0647 13.391 19.1552C12.6776 19.2485 11.7376 19.25 10.3868 19.25H9.6134C8.26256 19.25 7.32255 19.2485 6.60915 19.1552C5.91715 19.0647 5.54299 18.8988 5.26957 18.6431C4.99616 18.3873 4.80583 18.025 4.66948 17.3405C4.52891 16.6349 4.46488 15.6971 4.37503 14.3492L3.91508 7.45011Z"/>
              <path
                d="M7.42546 9.25372C7.83762 9.21251 8.20515 9.51321 8.24636 9.92537L8.74637 14.9254C8.78758 15.3375 8.48687 15.7051 8.07471 15.7463C7.66256 15.7875 7.29502 15.4868 7.25381 15.0746L6.75381 10.0746C6.71259 9.66247 7.0133 9.29494 7.42546 9.25372Z"/>
              <path
                d="M13.2464 10.0746C13.2876 9.66247 12.9869 9.29494 12.5747 9.25372C12.1626 9.21251 11.795 9.51321 11.7538 9.92537L11.2538 14.9254C11.2126 15.3375 11.5133 15.7051 11.9255 15.7463C12.3376 15.7875 12.7051 15.4868 12.7464 15.0746L13.2464 10.0746Z"/>
            </svg>
          </button>
          <button *ngIf="this.userId == comment.user.id" (click)="this.editCommentText(comment.id,comment.text)"
                  class="edit-button">
            <svg class="edit-icon" xmlns="http://www.w3.org/2000/svg"
                 width="15" height="15" viewBox="0 0 22 22" fill="current color">
              <path
                d="M13.7566 1.62145C15.5852 -0.207149 18.55 -0.207149 20.3786 1.62145C22.2072 3.45005 22.2072 6.41479 20.3786 8.24339L10.8933 17.7287C10.3514 18.2706 10.0323 18.5897 9.67745 18.8665C9.25915 19.1927 8.80655 19.4725 8.32766 19.7007C7.92136 19.8943 7.49334 20.037 6.76623 20.2793L3.43511 21.3897L2.63303 21.6571C1.98247 21.8739 1.26522 21.7046 0.780321 21.2197C0.29542 20.7348 0.126102 20.0175 0.342956 19.367L1.72068 15.2338C1.96303 14.5067 2.10568 14.0787 2.29932 13.6724C2.52755 13.1935 2.80727 12.7409 3.13354 12.3226C3.41035 11.9677 3.72939 11.6487 4.27137 11.1067L13.7566 1.62145ZM3.40051 19.8201L6.24203 18.8729C7.03314 18.6092 7.36927 18.4958 7.68233 18.3466C8.06287 18.1653 8.42252 17.943 8.75492 17.6837C9.02837 17.4704 9.28013 17.2205 9.86979 16.6308L17.4393 9.06137C16.6506 8.78321 15.6346 8.26763 14.6835 7.31651C13.7324 6.36538 13.2168 5.34939 12.9387 4.56075L5.36917 12.1302C4.77951 12.7199 4.52959 12.9716 4.3163 13.2451C4.05704 13.5775 3.83476 13.9371 3.65341 14.3177C3.50421 14.6307 3.3908 14.9669 3.12709 15.758L2.17992 18.5995L3.40051 19.8201ZM14.1554 3.34404C14.1896 3.519 14.2474 3.75684 14.3438 4.03487C14.561 4.66083 14.9712 5.48288 15.7442 6.25585C16.5171 7.02881 17.3392 7.43903 17.9651 7.6562C18.2432 7.75266 18.481 7.81046 18.656 7.84466L19.3179 7.18272C20.5607 5.93991 20.5607 3.92492 19.3179 2.68211C18.0751 1.4393 16.0601 1.4393 14.8173 2.68211L14.1554 3.34404Z"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </ng-template>

</div>
