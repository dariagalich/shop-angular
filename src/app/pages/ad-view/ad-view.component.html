<div class="container" *ngIf="product$ | async as product; else loading">
  <div>
    <p>Севастополь · Электроника · Ноутбуки · Apple</p>
  </div>
  <div class="ad-view">
    <div>
      <div class="display-row">
        <h3>{{product.name}}</h3>
        <div *ngIf="isAdvertCreateByUser" class="buttons-user-edit">

          <button [routerLink]="['/ad-create-edit',product.id]" class="edit-button">
            <svg class="edit-icon" xmlns="http://www.w3.org/2000/svg"
                 width="22" height="22" viewBox="0 0 22 22" fill="current color">
              <path
                d="M13.7566 1.62145C15.5852 -0.207149 18.55 -0.207149 20.3786 1.62145C22.2072 3.45005 22.2072 6.41479 20.3786 8.24339L10.8933 17.7287C10.3514 18.2706 10.0323 18.5897 9.67745 18.8665C9.25915 19.1927 8.80655 19.4725 8.32766 19.7007C7.92136 19.8943 7.49334 20.037 6.76623 20.2793L3.43511 21.3897L2.63303 21.6571C1.98247 21.8739 1.26522 21.7046 0.780321 21.2197C0.29542 20.7348 0.126102 20.0175 0.342956 19.367L1.72068 15.2338C1.96303 14.5067 2.10568 14.0787 2.29932 13.6724C2.52755 13.1935 2.80727 12.7409 3.13354 12.3226C3.41035 11.9677 3.72939 11.6487 4.27137 11.1067L13.7566 1.62145ZM3.40051 19.8201L6.24203 18.8729C7.03314 18.6092 7.36927 18.4958 7.68233 18.3466C8.06287 18.1653 8.42252 17.943 8.75492 17.6837C9.02837 17.4704 9.28013 17.2205 9.86979 16.6308L17.4393 9.06137C16.6506 8.78321 15.6346 8.26763 14.6835 7.31651C13.7324 6.36538 13.2168 5.34939 12.9387 4.56075L5.36917 12.1302C4.77951 12.7199 4.52959 12.9716 4.3163 13.2451C4.05704 13.5775 3.83476 13.9371 3.65341 14.3177C3.50421 14.6307 3.3908 14.9669 3.12709 15.758L2.17992 18.5995L3.40051 19.8201ZM14.1554 3.34404C14.1896 3.519 14.2474 3.75684 14.3438 4.03487C14.561 4.66083 14.9712 5.48288 15.7442 6.25585C16.5171 7.02881 17.3392 7.43903 17.9651 7.6562C18.2432 7.75266 18.481 7.81046 18.656 7.84466L19.3179 7.18272C20.5607 5.93991 20.5607 3.92492 19.3179 2.68211C18.0751 1.4393 16.0601 1.4393 14.8173 2.68211L14.1554 3.34404Z"/>
            </svg>
            Редактировать
          </button>

          <button (click)="this.deleteAdvert(product.id)" class="delete-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="21"
                 viewBox="0 0 20 21" fill="current color">
              <path
                d="M10 1.75C9.02154 1.75 8.1871 2.37503 7.87787 3.24993C7.73983 3.64047 7.31134 3.84517 6.9208 3.70713C6.53026 3.56909 6.32557 3.1406 6.46361 2.75007C6.97804 1.29459 8.36609 0.25 10 0.25C11.634 0.25 13.022 1.29459 13.5365 2.75007C13.6745 3.1406 13.4698 3.56909 13.0793 3.70713C12.6887 3.84517 12.2602 3.64047 12.1222 3.24993C11.813 2.37503 10.9785 1.75 10 1.75Z"/>
              <path
                d="M0.75 5C0.75 4.58579 1.08579 4.25 1.5 4.25H18.5001C18.9143 4.25 19.2501 4.58579 19.2501 5C19.2501 5.41421 18.9143 5.75 18.5001 5.75H1.5C1.08579 5.75 0.75 5.41421 0.75 5Z"/>
              <path
                d="M3.91508 7.45011C3.88753 7.03681 3.53015 6.72411 3.11686 6.75166C2.70356 6.77921 2.39085 7.13659 2.41841 7.54989L2.88186 14.5016C2.96735 15.7844 3.03641 16.8205 3.19838 17.6336C3.36678 18.4789 3.6532 19.185 4.2448 19.7384C4.83639 20.2919 5.55994 20.5307 6.41459 20.6425C7.23663 20.75 8.27507 20.75 9.56066 20.75H10.4395C11.7251 20.75 12.7635 20.75 13.5856 20.6425C14.4402 20.5307 15.1638 20.2919 15.7554 19.7384C16.347 19.185 16.6334 18.4789 16.8018 17.6336C16.9637 16.8205 17.0328 15.7844 17.1183 14.5016L17.5818 7.54989C17.6093 7.13659 17.2966 6.77921 16.8833 6.75166C16.47 6.72411 16.1126 7.03681 16.0851 7.45011L15.6251 14.3492C15.5353 15.6971 15.4712 16.6349 15.3307 17.3405C15.1943 18.025 15.004 18.3873 14.7306 18.6431C14.4572 18.8988 14.083 19.0647 13.391 19.1552C12.6776 19.2485 11.7376 19.25 10.3868 19.25H9.6134C8.26256 19.25 7.32255 19.2485 6.60915 19.1552C5.91715 19.0647 5.54299 18.8988 5.26957 18.6431C4.99616 18.3873 4.80583 18.025 4.66948 17.3405C4.52891 16.6349 4.46488 15.6971 4.37503 14.3492L3.91508 7.45011Z"/>
              <path
                d="M7.42546 9.25372C7.83762 9.21251 8.20515 9.51321 8.24636 9.92537L8.74637 14.9254C8.78758 15.3375 8.48687 15.7051 8.07471 15.7463C7.66256 15.7875 7.29502 15.4868 7.25381 15.0746L6.75381 10.0746C6.71259 9.66247 7.0133 9.29494 7.42546 9.25372Z"/>
              <path
                d="M13.2464 10.0746C13.2876 9.66247 12.9869 9.29494 12.5747 9.25372C12.1626 9.21251 11.795 9.51321 11.7538 9.92537L11.2538 14.9254C11.2126 15.3375 11.5133 15.7051 11.9255 15.7463C12.3376 15.7875 12.7051 15.4868 12.7464 15.0746L13.2464 10.0746Z"/>
            </svg>
            Удалить
          </button>
        </div>
      </div>

      <img *ngIf="product.imagesIds.length!=0 ;else errSrc"
           src="http://194.87.237.48:5000/Images/{{product.imagesIds[0]}}" alt="ошибка загрузки" class="big-img">
      <ng-template #errSrc><img src="/assets/images/image_error.png" alt="ошибка загрузки"></ng-template>

      <div class="small-img">
        <div *ngFor="let p of product.imagesIds; let i = index">
          <img *ngIf="i > 0;else imageChosen" src="http://194.87.237.48:5000/Images/{{p}}" alt="ошибка загрузки">
          <ng-template #imageChosen>
            <img src="http://194.87.237.48:5000/Images/{{p}}" alt="ошибка загрузки" class="imgChosen">
          </ng-template>
        </div>
      </div>


    </div>
    <div class="ad-view-product-description">
      <h3>{{product.cost | number:'1.0-0' }} &#8381;</h3>

      <h3>Владелец</h3>
      <div class="row" [routerLink]="['/user-profile',product.user.id]">
        <div class="user-avatar">
          <svg width="5" height="5" viewBox="0 0 16 21" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M8 0.25C5.37665 0.25 3.25 2.37665 3.25 5C3.25 7.62335 5.37665 9.75 8 9.75C10.6234 9.75 12.75 7.62335 12.75 5C12.75 2.37665 10.6234 0.25 8 0.25ZM4.75 5C4.75 3.20507 6.20507 1.75 8 1.75C9.79493 1.75 11.25 3.20507 11.25 5C11.25 6.79493 9.79493 8.25 8 8.25C6.20507 8.25 4.75 6.79493 4.75 5Z"/>
            <path
              d="M8 11.25C5.96067 11.25 4.07752 11.7208 2.67815 12.5204C1.3 13.3079 0.25 14.5101 0.25 16C0.25 17.4899 1.3 18.6921 2.67815 19.4796C4.07752 20.2792 5.96067 20.75 8 20.75C10.0393 20.75 11.9225 20.2792 13.3219 19.4796C14.7 18.6921 15.75 17.4899 15.75 16C15.75 14.5101 14.7 13.3079 13.3219 12.5204C11.9225 11.7208 10.0393 11.25 8 11.25ZM1.75 16C1.75 15.2807 2.26701 14.483 3.42236 13.8228C4.55649 13.1747 6.17334 12.75 8 12.75C9.82666 12.75 11.4435 13.1747 12.5776 13.8228C13.733 14.483 14.25 15.2807 14.25 16C14.25 16.7193 13.733 17.517 12.5776 18.1772C11.4435 18.8253 9.82666 19.25 8 19.25C6.17334 19.25 4.55649 18.8253 3.42236 18.1772C2.26701 17.517 1.75 16.7193 1.75 16Z"/>
          </svg>
        </div>
        <p>{{product.user.name}}</p>
      </div>

      <button class="button-blue" (click)="showPhone()">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
          <path
            d="M6.39459 2.324C6.29128 2.1911 6.16088 2.08171 6.01205 2.00309C5.86321 1.92447 5.69935 1.87841 5.53135 1.86799C5.36335 1.85756 5.19505 1.883 5.03764 1.94261C4.88022 2.00222 4.73729 2.09465 4.61834 2.21375L2.80884 4.025C1.96359 4.872 1.65209 6.07075 2.02134 7.1225C3.55389 11.4758 6.04686 15.4282 9.31534 18.6865C12.5737 21.9549 16.5261 24.4479 20.8793 25.9805C21.9311 26.3497 23.1298 26.0382 23.9768 25.193L25.7863 23.3835C25.9054 23.2645 25.9979 23.1216 26.0575 22.9642C26.1171 22.8068 26.1425 22.6385 26.1321 22.4705C26.1217 22.3025 26.0756 22.1386 25.997 21.9898C25.9184 21.841 25.809 21.7106 25.6761 21.6072L21.6388 18.4677C21.4969 18.3576 21.3317 18.2812 21.1559 18.2442C20.9801 18.2072 20.7981 18.2107 20.6238 18.2542L16.7913 19.2115C16.2798 19.3394 15.7438 19.3326 15.2357 19.1918C14.7275 19.051 14.2645 18.7811 13.8916 18.4082L9.59359 14.1085C9.22044 13.7358 8.95016 13.2728 8.80909 12.7647C8.66802 12.2565 8.66095 11.7205 8.78859 11.2087L9.74759 7.37625C9.79118 7.20194 9.79461 7.02001 9.75763 6.84418C9.72064 6.66835 9.64421 6.50322 9.53409 6.36125L6.39459 2.324ZM3.29709 0.894247C3.60333 0.587909 3.97124 0.350226 4.37639 0.19698C4.78153 0.0437336 5.21464 -0.0215682 5.64696 0.00541026C6.07928 0.0323888 6.50091 0.15103 6.88386 0.353457C7.26681 0.555883 7.60231 0.837463 7.86809 1.1795L11.0076 5.215C11.5833 5.95525 11.7863 6.9195 11.5588 7.8295L10.6016 11.662C10.5521 11.8605 10.5548 12.0684 10.6094 12.2656C10.6639 12.4628 10.7686 12.6425 10.9131 12.7872L15.2128 17.087C15.3578 17.2318 15.5378 17.3366 15.7353 17.3912C15.9328 17.4458 16.1411 17.4483 16.3398 17.3985L20.1706 16.4412C20.6197 16.329 21.0884 16.3202 21.5413 16.4157C21.9943 16.5112 22.4196 16.7085 22.7851 16.9925L26.8206 20.132C28.2713 21.2607 28.4043 23.4045 27.1058 24.7012L25.2963 26.5107C24.0013 27.8057 22.0658 28.3745 20.2616 27.7392C15.6437 26.1144 11.4508 23.4707 7.99409 20.0042C4.52785 16.548 1.88416 12.3558 0.259092 7.7385C-0.374408 5.936 0.194342 3.99875 1.48934 2.70375L3.29884 0.894247H3.29709Z"
            fill="white"/>
          <path fill-rule="evenodd" clip-rule="evenodd"
                d="M21.875 1.75C22.1071 1.75 22.3296 1.84219 22.4937 2.00628C22.6578 2.17038 22.75 2.39294 22.75 2.625V5.25H25.375C25.6071 5.25 25.8296 5.34219 25.9937 5.50628C26.1578 5.67038 26.25 5.89294 26.25 6.125C26.25 6.35706 26.1578 6.57962 25.9937 6.74372C25.8296 6.90781 25.6071 7 25.375 7H22.75V9.625C22.75 9.85706 22.6578 10.0796 22.4937 10.2437C22.3296 10.4078 22.1071 10.5 21.875 10.5C21.6429 10.5 21.4204 10.4078 21.2563 10.2437C21.0922 10.0796 21 9.85706 21 9.625V7H18.375C18.1429 7 17.9204 6.90781 17.7563 6.74372C17.5922 6.57962 17.5 6.35706 17.5 6.125C17.5 5.89294 17.5922 5.67038 17.7563 5.50628C17.9204 5.34219 18.1429 5.25 18.375 5.25H21V2.625C21 2.39294 21.0922 2.17038 21.2563 2.00628C21.4204 1.84219 21.6429 1.75 21.875 1.75Z"
                fill="white"/>
        </svg>
        Показать контакты
      </button>
      <div *ngIf="togglePhone">
        <p *ngIf="product.phone">Телефон {{product.phone}}</p>
        <p *ngIf="product.email">E-mail {{product.email}}</p>
      </div>
      <h4>Адрес</h4>
      <p>{{product.location}}</p>
      <!--      <button>Откркрыть на катре</button>-->
      <h4>Описание</h4>
      <p>{{product.description}}</p>
      <div *ngIf="product.createdAt">
        <h4>Дата создания</h4>
        <p>{{product.createdAt | date: 'd.M.yy h:mm'}}</p>
      </div>
      <div>
        <h4>Комментарии</h4>
        <app-comments></app-comments>
      </div>
    </div>

  </div>

</div>
<ng-template #loading>
  <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
</ng-template>
